<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>WhereIAm</title> 
    <meta name="author" content="KYD [know.your.doc]">
    <meta name="keywords" content="poetry, image, music, gps, fediverso">
    <meta name="description" content="KYD Webpage">
    <meta property="og:title" content="KYD Webpage">
    <meta property="og:description" content="Where[I]Am-coordinate esistenziali per non perdermi">
    <meta property="og:image" content="https://www.example.com/immagine-di-anteprima.jpg">
    <meta property="og:url" content="https://www.example.com/la-mia-pagina">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Where[I]Am">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="KYD Webpage">
    <meta name="twitter:description" content="Where[I]Am-coordinate esistenziali per non perdermi">
    <meta name="twitter:image" content="https://www.example.com/immagine-di-anteprima-twitter.jpg">
    <meta http-equiv="refresh" content="200; url=https://kydavide.github.io/whereiam/mystery">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: "Courier New", monospace;
            text-align: center;
            background-color: #fff;
            border: 3px solid #343a40;
            border-radius: 8px;
            max-width: 600px;
            margin: 10px auto;
            padding: 10px;
        }
        header {
            background-color: #fff;
            padding: 10px;
            border: 3px solid #343a40;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        #coordinate {
            background-color: #fff;
            border: 3px solid #fff;
            border-radius: 8px;
            padding: 10px;
            margin-top: 10px;
            text-align: center;
        }
        #image-container {
            max-width: 300px;
            max-height: 300px;
            background: #fff;
            border-radius: 0px; /* Rimuove l'angolo arrotondato */
            border: 0px solid #ff5f5f; /* Mantiene il bordo */
            overflow: hidden;
            margin: 10px auto;
        }
        img {
            max-width: 100%;
            height: auto;
        }
         #poetry {
            background-color: #fff;
            border: 3px solid #fff;
            border-radius: 8px;
            padding: 10px;
            margin: 10px auto;
            text-align: center;
            font-family: "Courier New", monospace;
        }
        footer {
            background-color: #17a2b8;
            padding: 10px;
            border: 3px solid #fff;
            border-radius: 8px;
        }
        a {
            color: #fff; /* Colore "bianco" per tutti i link */
            text-decoration: none; /* Rimuove la sottolineatura dai link */
        }
        a:hover {
            text-decoration: underline; /* Aggiunge la sottolineatura al passaggio del mouse */
        }
        footer a {
            color: #fff; /* Colore bianco per i link nel footer */
            text-decoration: none; /* Rimuove la sottolineatura dai link nel footer */
        }
        footer a:hover {
            text-decoration: underline; /* Aggiunge la sottolineatura al passaggio del mouse sui link nel footer */
        }
    </style>
</head>
<body>
    <!-- HEADER -->
    <header>
        <div id="title">
            <h1>Where[I]Am</h1>
            <p>Coordinate esistenziali per non perdermi</p>
        </div>
    </header>

    <!-- BODY -->
    <main>
        <h1>[3]</h1>
        <section id="coordinate">
            <div id="metadata">Caricamento dati...</div>
        </section>
        <section>
            <div id="image-container">
                <!-- L'immagine verrÃ  inserita qui dallo script -->
            </div>
        </section>
        <section id="poetry">
            <p>
                Questi sono i versi della prova della poesia.<br>
                E si, tre un numero perfetto<br>
                e in equilibrio solo quando dentro siamo due<br><br>

                Questo un pensiero casuale<br>
                per testare la funzione del nuovo portale
            </p>
        </section>
    </main>

    <!-- FOOTER -->
    <footer>
        <p>KYD 2024</p>
        <p><a href="privacy.html">Privacy Policy</a></p>
        <p><a href="mailto:know.your.doc@tutamail.com">@scrivimi!</a></p>
    </footer>

    <!-- Script per EXIF.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/exif-js/2.3.0/exif.min.js"></script>

    <!-- Script per caricare l'immagine e estrarre i metadati -->
    <script>
        function loadImageAndExtractMetadata() {
            // Specifica il percorso dell'immagine direttamente
            const imgSrc = 'IMG_20240803_070411.jpg'; // Inserisci qui il nome esatto del file immagine
            const img = new Image();
            img.src = imgSrc;
            img.onload = () => {
                document.getElementById('image-container').appendChild(img);
                extractMetadata(imgSrc);
            };
            img.onerror = () => {
                console.error('Immagine non trovata o errore nel caricamento.');
                document.getElementById('metadata').innerText = "Errore nel caricamento dell'immagine.";
            };
        }

        function extractMetadata(imageSrc) {
            const img = new Image();
            img.src = imageSrc;
            img.onload = () => {
                EXIF.getData(img, function() {
                    const date = EXIF.getTag(this, "DateTimeOriginal");
                    const lat = EXIF.getTag(this, "GPSLatitude");
                    const lon = EXIF.getTag(this, "GPSLongitude");

                    if (date && lat && lon) {
                        const latRef = EXIF.getTag(this, "GPSLatitudeRef") || "N";
                        const lonRef = EXIF.getTag(this, "GPSLongitudeRef") || "E";

                        const latitude = (lat[0] + lat[1] / 60 + lat[2] / 3600) * (latRef === "N" ? 1 : -1);
                        const longitude = (lon[0] + lon[1] / 60 + lon[2] / 3600) * (lonRef === "E" ? 1 : -1);

                        const metadata = `${date} | ${latitude.toFixed(6)}, ${longitude.toFixed(6)} | <a href="https://www.openstreetmap.org/?mlat=${latitude}&mlon=${longitude}" target="_blank">OSM</a>`;
                        document.getElementById('metadata').innerHTML = metadata;
                    } else {
                        document.getElementById('metadata').innerHTML = "Metadati non disponibili.";
                    }
                });
            };
            img.onerror = () => {
                console.error('Errore nel caricamento dell\'immagine per EXIF.');
                document.getElementById('metadata').innerText = "Errore nel caricamento dei metadati.";
            };
        }

        // Carica l'immagine e i metadati al caricamento della pagina
        loadImageAndExtractMetadata();
    </script>
</body>
</html>
